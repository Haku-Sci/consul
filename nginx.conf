# Nginx server configuration to reverse‐proxy Consul API/UI
server {
  # Listen on the port exposed by Docker/Clever Cloud
  listen 8080;

  # Proxy all incoming requests to the local Consul HTTP API (port 8500)
  location / {
    proxy_pass http://127.0.0.1:8500;
    proxy_http_version 1.1;
    # Preserve the Host header from the original request
    proxy_set_header Host $host;
    # Ensure connections are not reused incorrectly
    proxy_set_header Connection "";
    # Disable proxy buffering for real‐time responses
    proxy_buffering off;
  }
}
